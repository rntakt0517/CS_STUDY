# 메모리 관리

---

## 1. 연속 메모리 할당

**연속 메모리 할당**은 프로세스를 메모리에 연속적으로 배치하는 기본적인 방식

### - 특징:

- 프로세스를 메모리에 연속적으로 할당
- **외부 단편화** 문제 발생: 프로세스 사이에 사용하지 않는 작은 공간들이 생김
- 물리 메모리보다 큰 프로세스 실행 불가능

### - 스와핑 (Swapping)

스와핑은 메모리 부족 시 프로세스를 임시로 보조기억장치로 이동시키는 기법

- 미사용 프로세스를 보조기억장치로 이동 (swap out)
- 빈 공간에 새 프로세스 적재 (swap in)
- 메모리보다 큰 프로세스 집합 실행 가능
- `free`, `top` 명령어로 스왑 영역 확인 가능

---

## 2. 페이징 (Paging)

페이징은 프로세스를 일정 크기의 페이지로 나누어 관리하는 메모리 관리 기법

### - 기본 개념:

- 프로세스를 일정 크기 **페이지**로 분할
- 물리 메모리를 동일한 크기의 **프레임**으로 분할
- 페이지를 프레임에 불연속적 할당

### - 장점:

- **외부 단편화 해결**
- 물리 메모리보다 큰 프로세스 실행 가능

### - 단점:

- **내부 단편화** 발생 가능: 페이지 크기와 프로세스 크기가 정확히 일치하지 않을 때 발생

### - 페이지 테이블

각 프로세스마다 존재하며, 페이지와 프레임 간의 매핑 정보를 저장

- 페이지 번호와 프레임 번호 매핑

- CPU의 논리 주소를 물리 주소로 변환

- **프로세스 테이블 베이스 레지스터 PTBR (Page Table Base Register)**
  
  : 페이지 테이블 위치 확인

### - TLB (Translation Lookaside Buffer)

페이지 테이블 접근 속도를 개선하기 위한 캐시

- 자주 참조되는 페이지 테이블 항목 저장
- 메모리 접근 시간 단축
- **TLB 히트**: TLB에서 페이지 정보 찾음
- **TLB 미스**: 메모리의 페이지 테이블 참조 필요

### - 페이지 테이블 엔트리 정보:

1. **유효 비트**: 페이지의 메모리 존재 여부
2. **보호 비트**: 읽기/쓰기/실행 권한
3. **참조 비트**: CPU 접근 여부
4. **수정 비트**: 페이지 내용 변경 여부

### - 계층적 페이징

페이지 테이블을 여러 단계로 구성하여 메모리 효율성을 높이는 기법

- 페이지 테이블을 여러 단계로 구성
- 메모리 효율성 향상
- 2단계, 3단계 등 다단계 페이지 테이블 사용 가능

### - 논리 주소 구조:

- **페이지 번호**와 **변위**로 구성
- 물리 주소로 변환 시 프레임 번호와 변위 사용

---

## 3. 요구 페이징 (Demand Paging)

필요한 페이지만 메모리에 적재하는 기법

- 필요한 페이지만 메모리에 적재
- **페이지 폴트** 발생 시 해당 페이지 로드

> **페이지 폴트** : 프로세스가 접근하려는 메모리 페이지가
> 
> 물리적 메모리(RAM)에 존재하지 않을 때 발생하는 이벤트

- **순수 요구 페이징**: 모든 페이지 미적재 상태로 시작

---

## 4. 페이지 교체 알고리즘

메모리가 가득 찼을 때 어떤 페이지를 교체할지 결정하는 알고리즘

### - 페이지 참조열

CPU가 참조하는 페이지 순서를 나타냄

- 연속된 중복 페이지 생략

### - 주요 알고리즘:

1. **FIFO (First-In-First-Out)**
   - 가장 오래된 페이지 교체
   - 구현 간단하나 성능 저하 가능
2. **2차 기회 알고리즘**
   - FIFO 기반, 참조 비트 고려
   - 참조 비트 1인 경우 추가 기회 제공
3. **최적 페이지 교체 (Optimal)**
   - 가장 오래 사용되지 않을 페이지 교체
   - 이론적 알고리즘, 실제 구현 어려움
   - 다른 알고리즘 성능 평가 기준으로 사용
4. **LRU (Least Recently Used)**
   - 가장 오래 사용되지 않은 페이지 교체
   - 실제 구현 가능한 효율적 알고리즘

---

## 5. 프레임 할당

각 프로세스에 얼마나 많은 프레임을 할당할지 결정하는 방법

### - 할당 방식:

1. **균등 할당**
   - 모든 프로세스에 동일 프레임 수 할당
   - 단순하나 비효율적 가능성 존재
2. **비례 할당**
   - 프로세스 크기에 비례하여 프레임 할당
   - 프로세스 특성 반영 부족
3. **작업 집합 모델**
   - 일정 시간 동안 참조된 페이지 집합 기반 할당
   - 지역성 원리 활용
4. **페이지 폴트 빈도 기반**
   - 페이지 폴트 발생 빈도에 따른 프레임 조절
   - 상한선과 하한선 설정하여 프레임 수 조정

---

## 6. 스레싱 (Thrashing)

과도한 페이지 교체로 인한 시스템 성능 저하 현상

- 과도한 페이지 교체로 인한 성능 저하

- **CPU 이용률 급격히 감소**

- 적절한 프레임 할당으로 방지 필요
  
  - 균등 할당 (equal allocation) : 가장 단순
  - 비례 할당 (proportional allocation) : 프로세스 크기 고려
  - 작업 집합 모델 : CPU가 특정 시간 동안 주로 참조한 페이지 개수만큼만 프레임 할당
  
  > 작업 집합을 구하려면 프로세스가 참조한 페이지와 시간 간격이 필요
  
  - 페이지 폴트 빈도 : 페이지 폴트율의 상한선과 하한선 내부 범위 안에서만 할당

- 멀티프로그래밍 정도와 밀접한 관련

---
